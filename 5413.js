(self.webpackChunkviz_dados_rio=self.webpackChunkviz_dados_rio||[]).push([[5413],{4552:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});var r=n(7294),a=n(17),o=n(6158),i=n.n(o),c=n(8296),l=n(6024),u=n(1596),s=n(5518),f=n(5893);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(t);!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){c=!0,a=t}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function m(){var t=(0,r.useRef)(),e=d((0,r.useState)({longitude:s.tq?-43.47398:-43.50398,latitude:s.tq?-22.95157:-22.92957,zoom:s.tq?8.5:10.3,minZoom:s.tq?8.5:10.3}),2),n=e[0],o=(e[1],d((0,r.useState)([]),2)),i=o[0],h=o[1],m=(0,r.useRef)(null),p=function(){fetch("https://api.dados.rio/v2/clima_alagamento/alagamento_120min/").then((function(t){return t.json()})).then((function(t){h(t)}))};(0,r.useEffect)((function(){return m.current=setInterval(p,6e4),p(),function(){clearInterval(m.current)}}),[]);var b=function(t){t=t?t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r})):"#FFFFFF";var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},g=function(t){switch(t){case"sem alagamento":return"#8fdac7";case"pouco crítico":return"#35a98c";case"crítico":return"#e9c46a";case"muito crítico":return"#f4a261";case"extremamente crítico":return"#e76f51";default:return"#000000"}},v=new c.ZP({id:"h3-layer",data:i,pickable:!0,wireframe:!1,filled:!0,extruded:!1,elevationScale:0,getHexagon:function(t){return t.id_h3},getFillColor:function(t){return[b(g(t.status)).r,b(g(t.status)).g,b(g(t.status)).b,180]},getElevation:function(t){return t.qnt_alagamentos},getLineColor:[255,255,255,0],getLineWidth:120});return(0,f.jsxs)("div",{children:[i&&0===i.length&&(0,f.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,f.jsx)(u.iT,{height:100,width:100,color:"#00BFFF",visible:!0})}),i&&i.length>0&&(0,f.jsxs)(l.Z,{ref:t,initialViewState:n,controller:!0,onViewportChange:function(t){t.target},layers:[v],getTooltip:function(t){var e=t.object,n="";return e&&0!=e.qnt_alagamentos&&(n="<p><b>Alagamentos </b> ".concat(e.qnt_alagamentos," </p>")),e&&{html:"<div>\n        <h4><b>Bairro </b> ".concat(e.bairro,"</h4>\n        <p><b>Status </b> ").concat(e.status,"</p>\n        ").concat(n,"\n      </div>")}},children:[(0,f.jsx)(a.D5,{style:{width:"100vw",height:"100vh"},mapStyle:"mapbox://styles/escritoriodedados/clgfevcvc009101p9ax017bah",mapboxAccessToken:"pk.eyJ1IjoiZXNjcml0b3Jpb2RlZGFkb3MiLCJhIjoiY2t3bWdmcHpjMmJ2cTJucWJ4MGQ1Mm1kbiJ9.4hHJX-1pSevYoBbja7Pq4w"})," "]})]})}i().workerClass=n(1410).Z},9521:()=>{},2249:()=>{}}]);