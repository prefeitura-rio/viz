(self.webpackChunkviz_dados_rio=self.webpackChunkviz_dados_rio||[]).push([[1455],{4861:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>p});var n=r(7294),a=r(17),o=r(6158),i=r.n(o),u=r(8296),c=r(6024),l=r(1596),s=r(5518),f=r(5893);function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o=[],i=!0,u=!1;try{for(r=r.call(t);!(i=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);i=!0);}catch(t){u=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(){var t=(0,n.useRef)(),e=d((0,n.useState)({longitude:s.tq?-43.47398:-43.50398,latitude:s.tq?-22.95157:-22.92957,zoom:s.tq?8.5:10.3,minZoom:s.tq?8.5:10.3}),2),r=e[0],o=(e[1],d((0,n.useState)([]),2)),i=o[0],h=o[1],p=(0,n.useRef)(null),v=function(){fetch("https://api.dados.rio/v2/clima_pluviometro/precipitacao_3h/").then((function(t){return t.json()})).then((function(t){h(t)}))};(0,n.useEffect)((function(){return p.current=setInterval(v,6e4),v(),function(){clearInterval(p.current)}}),[]);var b=function(t){t=t?t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,r,n){return e+e+r+r+n+n})):"#FFFFFF";var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},m=function(t){switch(t){case"sem chuva":return"#8fdac7";case"chuva fraca":return"#35a98c";case"chuva moderada":return"#e9c46a";case"chuva forte":return"#f4a261";case"chuva muito forte":return"#e76f51";default:return"#000000"}},y=new u.ZP({id:"h3-layer",data:i,pickable:!0,wireframe:!1,filled:!0,extruded:!1,elevationScale:0,getHexagon:function(t){return t.id_h3},getFillColor:function(t){return[b(m(t.status)).r,b(m(t.status)).g,b(m(t.status)).b,180]},getElevation:function(t){return t.quantidade},getLineColor:[255,255,255,0],getLineWidth:120});return(0,f.jsxs)("div",{children:[i&&0===i.length&&(0,f.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,f.jsx)(l.iT,{height:100,width:100,color:"#00BFFF",visible:!0})}),i&&i.length>0&&(0,f.jsxs)(c.Z,{ref:t,initialViewState:r,controller:!0,onViewportChange:function(t){t.target},layers:[y],getTooltip:function(t){var e=t.object,r="";return e&&0!=e.quantidade&&(r="<p><b>Chuva </b> ".concat(e.quantidade," mm</p>")),e&&{html:"<div>\n        <h4><b>Bairro </b> ".concat(e.bairro,"</h4>\n        <p><b>Status </b> ").concat(e.status,"</p>\n        ").concat(r,"\n      </div>")}},children:[(0,f.jsx)(a.D5,{style:{width:"100vw",height:"100vh"},mapStyle:"mapbox://styles/escritoriodedados/clgfevcvc009101p9ax017bah",mapboxAccessToken:"pk.eyJ1IjoiZXNjcml0b3Jpb2RlZGFkb3MiLCJhIjoiY2t3bWdmcHpjMmJ2cTJucWJ4MGQ1Mm1kbiJ9.4hHJX-1pSevYoBbja7Pq4w"})," "]})]})}i().workerClass=r(1410).Z},9521:()=>{},2249:()=>{}}]);